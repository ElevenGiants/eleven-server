{
  "name": "token",
  "version": "0.0.0",
  "description": "HMAC token generation and verification with time-based limitation on validity",
  "author": {
    "name": "Mikito Takada",
    "email": "mikito.takada@gmail.com"
  },
  "main": "index.js",
  "directories": {
    "test": "test"
  },
  "repository": {
    "type": "git",
    "url": "git://github.com/mixu/token.git"
  },
  "keywords": [
    "authentication",
    "auth",
    "access",
    "token",
    "hmac",
    "hash",
    "time"
  ],
  "license": "BSD",
  "readme": "# token\n\n## Time-limited, HMAC-based authentication token generation\n\nBasic ideas:\n\n- Tokens are time-limited\n- Tokens can be associated with a set of data\n- Token expiry is lax, e.g. clients are warned well in advance of token expiry that they should renew their token\n- The verification hashes are cached\n\n## API\n\n- token.generate([data], [opts]): Given a piece of data, generates a sha512 HMAC from the data and the current time (step) using a secret key\n- token.verify(data, hash): Given a piece of data and a token, verifies that the HMAC matches. Returns a truthy value, either token.VALID or EXPIRING if the token is valid, or a falsy value, token.INVALID if the token is expired or invalid.\n\n## Configuration\n\nToken is just a small wrapper around sha512 HMAC hashes.\n\n`token` has the following configuration options:\n\n- .defaults.secret: A shared secret\n- .defaults.timeStep: The length of the time a token is valid.\n- .defaults.cache: If false, caching is disabled.\n\nThe server that generates the token, and the server that verifies the token have to agree on these two values. For example:\n\n    var token = require('token');\n    token.defaults.secret = 'AAB';\n    token.defaults.timeStep = 24 * 60 * 60; // 24h in seconds\n\nNote that tokens from the previous and next time step are accepted, e.g. tokens can be valid up to three time steps from when they were issued. This allows for 1) the token to expire lazily and 2) for the servers to disagree on time (e.g. even if the generating server is ahead, the token will be accepted).\n\nCaching: only the verification code uses a simple cache. Hashes are looked up from memory, and only computed if they were not previously computed. Up to 500 hashes are stored and when the cache is full, it is emptied completely.\n\n## Passing in data and verifying the token\n\nThe idea is that you can take any arbitrary data, and make it part of the token hash.\n\nThis allows you to make sure that the token is valid and that the data associated with the token is trustworthy.\n\nFor example, you might generate a token like this:\n\n    JSON.stringify( { id: 1, role: 'admin', auth: token.generate('1|admin') });\n\nThen, to verify that token, you need the id and role attributes as well as the actual token hash.\n\nThe token will only validate if the id and role match (and the token timestamp is up to date, which is implicitly included):\n\n    function isValid(json) {\n      return token.verify(json.id+'|'+json.role, json.auth);\n    }\n\nNote that if you put data in the token, you will need to recreate the data argument when you verify the token.\n\n## Token expiry\n\nExpiry is lax: tokens from the previous time step are accepted.\n\nThe reason for having lax expiry is that it makes clients simpler: assuming that the token expiry is sufficiently long, clients do not need to handle edge cases around when the token expires.\n\nInstead, when the clients send tokens that are old (e.g. expired one time step ago), the tokens are still accepted but the client is warned that it should get a new token soon.\n\n## Links\n\n- HOTP (HMAC-Based One-Time Password Algorithm): [RFC 4226](http:tools.ietf.org/html/rfc4226)\n- TOTP (Time-Based One-Time Password Algorithm): [RFC 6238](http:tools.ietf.org/html/rfc6238)\n\n",
  "_id": "token@0.0.0",
  "dist": {
    "shasum": "1d469f776e4bf3ae927775f4b04bc0f4635849f7",
    "tarball": "http://registry.npmjs.org/token/-/token-0.0.0.tgz"
  },
  "_npmVersion": "1.1.59",
  "_npmUser": {
    "name": "mixu",
    "email": "mixu@mixu.net"
  },
  "maintainers": [
    {
      "name": "mixu",
      "email": "mixu@mixu.net"
    }
  ],
  "_shasum": "1d469f776e4bf3ae927775f4b04bc0f4635849f7",
  "_from": "token@",
  "_resolved": "https://registry.npmjs.org/token/-/token-0.0.0.tgz"
}
